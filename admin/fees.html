<!doctype html><html lang="en"><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Fees</title><link rel='stylesheet' href='../assets/css/style.css'></head><body>
<div style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:linear-gradient(90deg,var(--green),var(--orange));color:#081014"><div><strong>Admin</strong></div><div><button onclick="logoutAdmin()" style="background:#fff;padding:6px;border-radius:6px">Logout</button></div></div>
<div style="display:flex"><aside style="width:240px;padding:18px;background:#07131a;color:rgba(255,255,255,0.9)"><ul style="list-style:none;padding:0"><li><a href="dashboard.html">Dashboard</a></li><li><a href="fees.html"><strong>Fees</strong></a></li></ul></aside>
<main style="flex:1;padding:18px"><h2>Fees Management</h2><div style="margin-top:8px"><button onclick="openAddFee()">+ Add Payment</button></div><table class="table" id="feesTable" style="margin-top:12px"><thead><tr><th>Student</th><th>Amount</th><th>Date</th><th>Note</th><th>Actions</th></tr></thead><tbody></tbody></table></main></div>
<div id="modal" class="modal"><div class="modal-card" id="modalCard"></div></div>
<script src="../assets/js/admin.js"></script>
<script>
function openAddFee(){
  const studs = JSON.parse(localStorage.getItem('gp_students')||'[]');
  if(studs.length===0){ alert('No students'); return; }
  const options = studs.map(s=>`<option value="${s.id}">${s.name} (${s.class||''})</option>`).join('');
  document.getElementById('modalCard').innerHTML = `<h3>Add Payment</h3><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px"><select id="feeStudent">${options}</select><input id="feeAmount" placeholder="Amount"></div><div style="margin-top:8px"><input id="feeNote" placeholder="Note"></div><div style="text-align:right;margin-top:8px"><button onclick="saveFeeModal()">Save</button></div>`;
  document.getElementById('modal').classList.add('open');
}
function saveFeeModal(){ const studentId=document.getElementById('feeStudent').value; const amount=document.getElementById('feeAmount').value; const note=document.getElementById('feeNote').value; if(!studentId||!amount){ alert('Select and amount'); return; } window.addFee({studentId,amount:parseFloat(amount),date:new Date().toLocaleDateString(),note}); document.getElementById('modal').classList.remove('open'); }
document.addEventListener('DOMContentLoaded', ()=>{ adminInit(); renderFees(); renderDashboardStats(); });
</script>
</body></html>
